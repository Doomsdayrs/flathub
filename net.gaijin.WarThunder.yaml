app-id: net.gaijin.warthunder
runtime: org.freedesktop.Platform
runtime-version: '21.08'
sdk: org.freedesktop.Sdk
command: run.sh
finish-args:
  - --socket=x11
  - --socket=fallback-x11
  - --device=dri
  # =all for controller support
  - --device=all
  - --socket=pulseaudio
  - --share=network
#  - --filesystem=~/.config/WarThunder/
#  - --persist=.config

modules:
  - name: warthunder
    buildsystem: simple
    build-commands: 
      - mkdir /app/bin/
      - install -D ./run.sh /app/bin/
    sources:
      - type: extra-data
        filename: wt.tar.gz
        url: https://cdnnow-distr.gaijinent.com/wt_launcher_linux_0.9.4.74.tar.gz
        sha256: 68d4e26c170091f9ede93730f8d258e72af5f325c256ffa6e44fdb9ad0c7d638
        # curl -s -L -I "URL" | gawk -v IGNORECASE=1 '/^Content-Length/ { print $2 }'
        size: 19275822
      - type: file
        path: run.sh

app-id: info.cemu.Cemu
runtime: org.gnome.Platform
runtime-version: '42'
sdk: org.gnome.Sdk

command: Cemu

finish-args:
  - --socket=x11
  - --share=ipc
  - --device=all
  - --socket=pulseaudio
  - --share=network

modules:        
  - name: pugixml
    buildsystem: cmake-ninja
    config-opts:
      - -DBUILD_SHARED_LIBS=on .
    sources:
      - type: archive
        url: https://github.com/zeux/pugixml/releases/download/v1.11.4/pugixml-1.11.4.tar.gz
        sha256: 8ddf57b65fb860416979a3f0640c2ad45ddddbbafa82508ef0a0af3ce7061716

  # Work from @Eonfge
  # Required so we can use wxWidgets with openGL integration
  - shared-modules/glu/glu-9.json
  - shared-modules/glew/glew.json

  - name: wxwidgets
    buildsystem: autotools
    config-opts:
      - --with-gtk=3
      - --disable-sdltest
      - --enable-shared
      - --enable-webview
      - --enable-webviewwebkit
      - --with-opengl
      - --with-sdl
      - --with-libiconv=/usr
    sources:
      - type: git
        url: https://github.com/wxWidgets/wxWidgets
        tag: v3.1.5
        commit: 9c0a8be1dc32063d91ed1901fd5fcd54f4f955a1
        x-checker-data:
          type: anitya
          project-id: 5150
          stable-only: true
          tag-template: v$version
          versions:
            <: '3.1.6'
  # End work from @Eonfge

  - name: Cemu
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DENABLE_VCPKG=false
      - -DCMAKE_BUILD_TYPE=release 
      - -DCMAKE_C_COMPILER=/usr/bin/gcc 
      - -DCMAKE_CXX_COMPILER=/usr/bin/g++
      - -G Ninja
      - -DCMAKE_MAKE_PROGRAM=/usr/bin/ninja
    sources:
      - type: git
        url: https://github.com/cemu-project/Cemu
        commit: d8da8a54a6c08296a884b892d714cabcb7e4bdb5
